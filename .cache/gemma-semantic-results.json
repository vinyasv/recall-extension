ğŸ§ª Hybrid Search End-to-End Test

============================================================

ğŸ“¦ Initializing in-memory database with test corpus...
[EmbeddingService] Initializing EmbeddingGemma model: onnx-community/embeddinggemma-300m-ONNX
[EmbeddingService] Running in: Node.js
[EmbeddingService] Using device: cpu
[EmbeddingService] EmbeddingGemma model initialized successfully
[EmbeddingService] Model produces 768 dimensional embeddings
âœ… Indexed 15 pages in memory

ğŸ” Running SEMANTIC evaluation...
  Query: "React hooks for state management"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0
  Query: "useEffect side effects synchronization"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0
  Query: "Python list methods append extend"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0
  Query: "TypeScript generic type parameters"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0
  Query: "React component state"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=2 M=0 L=0
  Query: "machine learning models"
    Precision: 0.0%
    Recall: 0.0%
    MRR: 0.000
    Results: 0
    Confidence: H=0 M=0 L=0
  Query: "git commit message"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0
  Query: "promise then catch"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=1 M=0 L=0

ğŸ” Running KEYWORD evaluation...
  Query: "React hooks for state management"
    Precision: 10.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 10
    Confidence: H=0 M=10 L=0
  Query: "useEffect side effects synchronization"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=0 M=2 L=0
  Query: "Python list methods append extend"
    Precision: 16.7%
    Recall: 100.0%
    MRR: 1.000
    Results: 6
    Confidence: H=0 M=6 L=0
  Query: "TypeScript generic type parameters"
    Precision: 20.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=0 M=5 L=0
  Query: "React component state"
    Precision: 40.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=0 M=5 L=0
  Query: "machine learning models"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=0 M=1 L=0
  Query: "git commit message"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=0 M=2 L=0
  Query: "promise then catch"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=0 M=2 L=0

ğŸ” Running HYBRID evaluation (alpha=0.7)...
  Query: "React hooks for state management"
    Precision: 10.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 10
    Confidence: H=1 M=9 L=0
  Query: "useEffect side effects synchronization"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0
  Query: "Python list methods append extend"
    Precision: 16.7%
    Recall: 100.0%
    MRR: 1.000
    Results: 6
    Confidence: H=1 M=5 L=0
  Query: "TypeScript generic type parameters"
    Precision: 20.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=1 M=4 L=0
  Query: "React component state"
    Precision: 40.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=2 M=3 L=0
  Query: "machine learning models"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=0 M=1 L=0
  Query: "git commit message"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0
  Query: "promise then catch"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0

ğŸ” Running HYBRID evaluation (alpha=0.5)...
  Query: "React hooks for state management"
    Precision: 10.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 10
    Confidence: H=1 M=9 L=0
  Query: "useEffect side effects synchronization"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0
  Query: "Python list methods append extend"
    Precision: 16.7%
    Recall: 100.0%
    MRR: 1.000
    Results: 6
    Confidence: H=1 M=5 L=0
  Query: "TypeScript generic type parameters"
    Precision: 20.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=1 M=4 L=0
  Query: "React component state"
    Precision: 40.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 5
    Confidence: H=2 M=3 L=0
  Query: "machine learning models"
    Precision: 100.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 1
    Confidence: H=0 M=1 L=0
  Query: "git commit message"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0
  Query: "promise then catch"
    Precision: 50.0%
    Recall: 100.0%
    MRR: 1.000
    Results: 2
    Confidence: H=1 M=1 L=0

============================================================
ğŸ“Š OVERALL RESULTS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode            â”‚ Prec     â”‚ Recall   â”‚ MRR      â”‚ Results  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Semantic        â”‚   87.5%  â”‚   87.5%  â”‚    0.875 â”‚      1.0 â”‚
â”‚ Keyword         â”‚   42.1%  â”‚  100.0%  â”‚    1.000 â”‚      4.1 â”‚
â”‚ Hybrid (Î±=0.7)  â”‚   42.1%  â”‚  100.0%  â”‚    1.000 â”‚      4.1 â”‚
â”‚ Hybrid (Î±=0.5)  â”‚   42.1%  â”‚  100.0%  â”‚    1.000 â”‚      4.1 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ˆ Confidence Distribution (avg per query):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mode            â”‚ High     â”‚ Medium   â”‚ Low      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Semantic        â”‚      1.0 â”‚      0.0 â”‚      0.0 â”‚
â”‚ Keyword         â”‚      0.0 â”‚      4.1 â”‚      0.0 â”‚
â”‚ Hybrid (Î±=0.7)  â”‚      1.0 â”‚      3.1 â”‚      0.0 â”‚
â”‚ Hybrid (Î±=0.5)  â”‚      1.0 â”‚      3.1 â”‚      0.0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¯ ANALYSIS:

âœ… Best Precision: Semantic (87.5%)
âœ… Best Recall: Keyword (100.0%)
âœ… Best MRR: Keyword (1.000)

ğŸ’¡ RECOMMENDATIONS:

âš ï¸  Semantic-only matches or exceeds hybrid precision.
   â†’ Consider increasing alpha (e.g., 0.8-0.9) to trust semantic more.
âš ï¸  Few high-confidence results. Check if threshold (0.70) needs adjustment.

============================================================
âœ… Test complete!

